<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Matcher - Intelligent Candidate Screening</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" crossorigin="anonymous">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§ </text></svg>">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <h1>AI Resume Matcher</h1>
                </div>
                <p class="tagline">Intelligent Candidate Screening Powered by AI</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Step 1: Job Description -->
            <section class="section job-section">
                <div class="section-header">
                    <div class="step-number">1</div>
                    <h2>Enter Job Description</h2>
                </div>
                <div class="form-group">
                    <label for="jobDescription">
                        <i class="fas fa-briefcase"></i>
                        Job Requirements & Description
                    </label>
                    <textarea 
                        id="jobDescription" 
                        class="job-textarea"
                        placeholder="Paste the job description here...&#10;&#10;Example:&#10;We are looking for a Python Developer with 3+ years experience.&#10;Required skills: Python, Django, REST APIs, PostgreSQL..."
                        rows="8"
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span> characters
                    </div>
                </div>
            </section>

            <!-- Step 2: Upload Resumes -->
            <section class="section upload-section">
                <div class="section-header">
                    <div class="step-number">2</div>
                    <h2>Upload Candidate Resumes</h2>
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="fileInput" multiple accept=".pdf,.docx,.doc,.txt" hidden>
                    <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop Resumes Here</h3>
                        <p>or <span class="browse-link" onclick="document.getElementById('fileInput').click()">browse files</span></p>
                        <p class="file-info">Supports: PDF, DOCX, DOC, TXT (Max 16MB each)</p>
                    </div>
                </div>

                <!-- Uploaded Files List -->
                <div class="uploaded-files" id="uploadedFiles">
                    <!-- Files will be added here dynamically -->
                </div>
            </section>

            <!-- Step 3: Match & Results -->
            <section class="section results-section">
                <div class="section-header">
                    <div class="step-number">3</div>
                    <h2>Match Candidates</h2>
                </div>
                
                <div class="match-controls">
                    <button class="btn btn-primary btn-large" id="matchBtn" onclick="matchCandidates()">
                        <i class="fas fa-search"></i>
                        Find Best Matches
                    </button>
                    <div class="match-settings">
                        <label>
                            <span>Top Results:</span>
                            <select id="topN">
                                <option value="5">Top 5</option>
                                <option value="10" selected>Top 10</option>
                                <option value="20">Top 20</option>
                                <option value="50">Top 50</option>
                            </select>
                        </label>
                        <label>
                            <span>Min Score:</span>
                            <input type="number" id="minScore" value="0" min="0" max="100">
                            <span>%</span>
                        </label>
                    </div>
                </div>

                <!-- Analytics & Actions Bar (shown after results) -->
                <div class="results-actions" id="resultsActions" style="display: none;">
                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="exportToCSV()" id="exportBtn">
                            <i class="fas fa-download"></i> Export to CSV
                        </button>
                        <button class="btn btn-secondary" onclick="showAnalytics()" id="analyticsBtn">
                            <i class="fas fa-chart-bar"></i> View Analytics
                        </button>
                        <button class="btn btn-secondary" onclick="showComparison()" id="compareBtn">
                            <i class="fas fa-balance-scale"></i> Compare Candidates
                        </button>
                    </div>
                    <div class="search-filter-bar">
                        <input type="text" id="searchInput" placeholder="Search candidates by name, email, or skills..." class="search-input">
                        <select id="filterScore" class="filter-select">
                            <option value="">All Scores</option>
                            <option value="90">90%+ (Excellent)</option>
                            <option value="80">80%+ (Very Good)</option>
                            <option value="70">70%+ (Good)</option>
                            <option value="60">60%+ (Fair)</option>
                        </select>
                        <select id="sortBy" class="filter-select">
                            <option value="score">Sort by Score</option>
                            <option value="name">Sort by Name</option>
                            <option value="skills">Sort by Skills Count</option>
                        </select>
                    </div>
                </div>

                <!-- Loading Indicator -->
                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Analyzing resumes and matching candidates...</p>
                </div>

                <!-- Statistics Panel -->
                <div class="stats-panel" id="statsPanel" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #6366f1, #8b5cf6);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="statTotal">0</div>
                            <div class="stat-label">Total Candidates</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="statAvgScore">0%</div>
                            <div class="stat-label">Average Match</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="statTopScore">0%</div>
                            <div class="stat-label">Top Match</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="statTotalSkills">0</div>
                            <div class="stat-label">Total Skills Found</div>
                        </div>
                    </div>
                </div>

                <!-- Results Display -->
                <div class="results-container" id="resultsContainer">
                    <div class="no-results" id="noResults">
                        <i class="fas fa-chart-line"></i>
                        <p>Results will appear here after matching</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by AI & Machine Learning | Built for Efficient Recruitment</p>
        </footer>
    </div>

    <!-- Candidate Detail Modal -->
    <div class="modal" id="candidateModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Analytics Modal -->
    <div class="modal" id="analyticsModal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('analyticsModal')">&times;</span>
            <h2>Match Analytics Dashboard</h2>
            <div id="analyticsBody"></div>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div class="modal" id="comparisonModal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeModal('comparisonModal')">&times;</span>
            <h2>Compare Candidates</h2>
            <div class="comparison-controls">
                <select id="compareCandidate1" class="compare-select">
                    <option value="">Select first candidate...</option>
                </select>
                <span class="vs-text">VS</span>
                <select id="compareCandidate2" class="compare-select">
                    <option value="">Select second candidate...</option>
                </select>
                <button class="btn btn-primary" onclick="performComparison()">Compare</button>
            </div>
            <div id="comparisonBody"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

